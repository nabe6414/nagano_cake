<div class="container">
  <div class="row">
    <div class="col-md-2 col-sm-12 mx-auto">
      <%= render 'public/shared/genre_search', genres: @genres %>
    </div>

    <div class="col-md-5 col-sm-12 mt-5 mx-auto">
      <%= image_tag @item.image %>
    </div>
    <div class="col-md-5 col-sm-12 mt-5 mx-auto">
      <h2><%= @item.name %></h2>
      <p><%= @item.introduction %></p>
      <p><strong>￥<%= @item.with_tax_price.to_s(:delimited) %></strong>(税込)</p>

      <% if customer_signed_in? && @item.is_active == true %>
        <%= form_with model: @cart_item, url: cart_items_path(@cart_item.id), method: :post do |f| %>
          <%= f.hidden_field :item_id, :value => @item.id %>
          <div class="d-flex flex-row">
            <%= f.select :amount, *[1..10], {include_blank: "個数選択"}, class: "form-control mr-5" %>
            <%= f.submit "カートに入れる", class: "btn btn-success ml-5" %>
          </div>
        <% end %>
      <% elsif customer_signed_in? && @item.is_active == false %>
        <p class="text-secondary"><%= @item.is_active ? '販売中' : '販売停止中' %></p>
      <% else %>
        <% if @item.is_active == true %>
          <p class="text-success"><%= @item.is_active ? '販売中' : '販売停止中' %></p>
        <% else %>
          <p class="text-secondary"><%= @item.is_active ? '販売中' : '販売停止中' %></p>
        <% end %>
      <% end %>
    </div>
  </div>
</div>